<?xml version="1.0" encoding="utf-8"?>
<!-- 
    Copyright (c) 2018 Nineva Studios
-->
<root xmlns:android="http://schemas.android.com/apk/res/android">

	<init>
		<log text="Android Permission Plugin Init"/>
		<!-- check if using Gradle -->
		<setBoolFromProperty result="PackageName" ini="Engine" section="/Script/AndroidRuntimeSettings.AndroidRuntimeSettings" property="PackageName" default=""/>
	</init>

	<prebuildCopies>
		<copyDir src="$S(PluginDir)/Private/Java" dst="$S(BuildDir)/src/" />
	</prebuildCopies>

  <!-- optional additions to proguard -->
	<proguardAdditions>
	<insert>
    </insert>
	</proguardAdditions>

	<!-- optional updates applied to AndroidManifest.xml -->
	<androidManifestUpdates>
		<addElements tag="application">
		<service           
			android:name="dev.nick.app.screencast.cast.ScreencastService"
            android:exported="false"
            android:label="@string/app_name"
            android:permission="android.permission.CAPTURE_SECURE_VIDEO_OUTPUT" />
		<activity android:name="dev.nick.app.screencast.app.RecorderActivity"
			android:theme="@android:style/Theme.Translucent.NoTitleBar"/>
		</addElements>
		
	 <addPermission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
	 <addPermission android:name="android.permission.RECORD_AUDIO" />
	</androidManifestUpdates>

	
	
	<buildGradleAdditions>
		<insert>
			dependencies {
			provided 'de.robv.android.xposed:api:82'
			provided 'de.robv.android.xposed:api:82:sources'
			compile 'com.github.hotchemi:permissionsdispatcher:2.2.0'
			}
		</insert>
	</buildGradleAdditions>
	
</root>
